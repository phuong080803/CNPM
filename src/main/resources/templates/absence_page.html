<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Wireframe Design</title>
    <link rel="stylesheet" href="/absence_style.css">
</head>

<body>
    <div class="Wireframe9">

        <!-- Thanh menu điều hướng -->
        <div class="Component3">
            <div class="Rectangle37">
                <a href="/home_page" class="btn">
                    <div class="HomePage">Home Page</div>
                </a>
                <a href="/clockin_page" class="btn">
                    <div class="Mclockin">Clock In</div>
                </a>
                <a href="/salary_page" class="btn">
                    <div class="Salary">Salary</div>
                </a>
                <a href="/notification_page" class="btn">
                    <div class="Notification">Notification</div>
                </a>
                <a href="/absence_page" class="btn">
                    <div class="Absence">Absence</div>
                </a>
                <a href="/support_page" class="btn">
                    <div class="Support">Support</div>
                </a>
            </div>
        </div>

        <!-- Thanh tìm kiếm và biểu tượng tài khoản -->
        <div class="Rectangle38">
            <a href="/home_page" class="btn">
                <div class="Workday">Workday</div>
            </a>
            <div class="Group33">
                <div class="Rectangle39">
                    <input type="search" name="search" placeholder="Search" required>
                    <div class="Group36">
                        <a href="/profile_page" class="AccountCircle">
                            <img src="/asset/icon.png" alt="Profile Icon">
                        </a>
                        <div class="Bell">
                            <img src="/asset/bell.png" alt="Notifications Bell">
                        </div>
                        <div class="Chat">
                            <img src="/asset/mess.png" alt="Chat Icon">
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Form yêu cầu nghỉ phép -->
        <div class="leave-form">
            <form id="leaveRequestForm" class="leave-request-form" action="/submit-leave" method="post">
                <label for="start-date">Ngày bắt đầu nghỉ:</label>
                <input type="date" id="start-date" name="startDate" required>

                <label for="end-date">Ngày kết thúc nghỉ:</label>
                <input type="date" id="end-date" name="endDate" required>

                <label for="reason">Lý do nghỉ:</label>
                <textarea id="reason" name="reason" required></textarea>

                <input type="submit" value="Submit">
            </form>
        </div>


    </div>

    <!-- JavaScript -->
    <script>
    document.getElementById("leaveRequestForm").addEventListener("submit", function(event) {
        event.preventDefault(); // Ngăn chặn việc tải lại trang
    
        // Lấy dữ liệu từ form
        const formData = new FormData(this);

        // Gửi yêu cầu POST bằng Fetch API
        fetch("/submit-leave", {
            method: "POST",
            body: new URLSearchParams(formData), // Chuyển đổi formData thành x-www-form-urlencoded
            headers: {
                "Content-Type": "application/x-www-form-urlencoded"
            }
        })
        .then(response => response.text()) // Đọc phản hồi dưới dạng text
        .then(message => {
            // Hiển thị thông báo dưới dạng popup
            alert(message);
            document.getElementById("leaveRequestForm").reset();
        })
        .catch(error => console.error('Error:', error));
    });
    </script>

</body>

</html>
